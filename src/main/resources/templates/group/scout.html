<!DOCTYPE html>

<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head th:replace="layout::header(~{::title},~{})">
    <title>推荐-公众号-letletme</title>
</head>

<body>

<div th:replace="layout::topnav"></div>

<div class="layui-fluid">
    <div class="layui-main">
        <div class="site-content">

            <div style="margin-top: 20px"></div>

            <h1 style="font-size: 28px">推荐</h1>

            <div class="layui-hide" id="nextGw" th:text="${nextGw}"></div>
            <div class="layui-hide" id="deadline"></div>

            <div style="margin-top: 30px"></div>

            <div class="layui-tab layui-tab-brief" lay-filter="checkTab">

                <ul class="layui-tab-title">
                    <li class="layui-this" lay-id="pick" th:text="'GW'+${nextGw}+'推荐'"></li>
                    <li class="" lay-id="result">推荐结果</li>
                </ul>

                <div class="layui-tab-content">

                    <div class="layui-tab-item layui-show">

                        <div style="margin-top: 30px"></div>

                        <fieldset class="layui-elem-field layui-field-title">
                            <legend id="deadLineTime" th:text></legend>
                        </fieldset>

                        <div style="margin-top: 30px"></div>

                        <div class="layui-row">

                            <div class="layui-col-md4" style="margin-left: -50px;margin-top: 10px">
                                <form class="layui-form">

                                    <div class="layui-col-md-offset2" id="leftFund" style="font-size: 20px"></div>

                                    <div class="layui-hide" id="fund" th:text="${fund}"></div>

                                    <div style="margin-top: 30px"></div>
                                    <div class="layui-form-item">
                                        <label class="layui-form-label">门将</label>
                                        <div class="layui-input-inline">
                                            <input class="layui-input" name="gkp" readonly
                                                   th:value="${scoutEntryEventData?.gkpName}" type="text">
                                        </div>
                                        <div class="layui-form-mid layui-word-aux" id="gkpPrice"
                                             th:text="${scoutEntryEventData?.gkpPrice}+'m'"></div>
                                    </div>
                                    <div class="layui-input layui-hide" id="gkpElement"
                                         th:text="${scoutEntryEventData?.gkp}"></div>

                                    <div style="margin-top: 30px"></div>
                                    <div class="layui-form-item">
                                        <label class="layui-form-label">后卫</label>
                                        <div class="layui-input-inline">
                                            <input class="layui-input" name="def" readonly
                                                   th:value="${scoutEntryEventData?.defName}" type="text">
                                        </div>
                                        <div class="layui-form-mid layui-word-aux" id="defPrice"
                                             th:text="${scoutEntryEventData?.defPrice}+'m'"></div>
                                    </div>
                                    <div class="layui-input layui-hide" id="defElement"
                                         th:text="${scoutEntryEventData?.def}"></div>

                                    <div style="margin-top: 30px"></div>
                                    <div class="layui-form-item">
                                        <label class="layui-form-label">中场</label>
                                        <div class="layui-input-inline">
                                            <input class="layui-input" name="mid" readonly
                                                   th:value="${scoutEntryEventData?.midName}" type="text">
                                        </div>
                                        <div class="layui-form-mid layui-word-aux" id="midPrice"
                                             th:text="${scoutEntryEventData?.midPrice}+'m'"></div>
                                    </div>
                                    <div class="layui-input layui-hide" id="midElement"
                                         th:text="${scoutEntryEventData?.mid}"></div>

                                    <div style="margin-top: 30px"></div>
                                    <div class="layui-form-item">
                                        <label class="layui-form-label">前锋</label>
                                        <div class="layui-input-inline">
                                            <input class="layui-input" name="fwd" readonly
                                                   th:value="${scoutEntryEventData?.fwdName}" type="text">
                                        </div>
                                        <div class="layui-form-mid layui-word-aux" id="fwdPrice"
                                             th:text="${scoutEntryEventData?.fwdPrice}+'m'"></div>
                                    </div>
                                    <div class="layui-input layui-hide" id="fwdElement"
                                         th:text="${scoutEntryEventData?.fwd}"></div>

                                    <div style="margin-top: 30px"></div>
                                    <div class="layui-form-item">
                                        <label class="layui-form-label">队长</label>
                                        <div class="layui-input-inline">
                                            <input class="layui-input" name="cap" readonly
                                                   th:value="${scoutEntryEventData?.captainName}" type="text">
                                        </div>
                                    </div>
                                    <div class="layui-input layui-hide" id="capElement"
                                         th:text="${scoutEntryEventData?.captain}"></div>

                                    <div style="margin-top: 30px"></div>
                                    <div class="layui-form-item layui-form-text">
                                        <label class="layui-form-label">推荐理由</label>
                                        <div class="layui-input-block">
                                            <textarea class="layui-textarea" name="reason"
                                                      placeholder="这个人很懒什么都没有留下还不肯打标点"
                                                      th:text="${scoutEntryEventData?.reason}"></textarea>
                                        </div>
                                    </div>

                                    <div class="layui-form-item">
                                        <div class="layui-input-block">
                                            <button class="layui-btn" id="confirmButton" lay-filter="confirmButton"
                                                    lay-submit="confirmButton" type="button">提交
                                            </button>
                                            <button class="layui-btn" id="resetButton" lay-filter="confirmButton"
                                                    lay-submit="resetButton" type="button">重置
                                            </button>
                                        </div>
                                    </div>
                                </form>
                            </div>

                            <div class="layui-col-md7 layui-col-sm-offset1">
                                <table class="layui-table" id="playerTable" lay-filter="playerTable"></table>
                            </div>

                        </div>

                        <div style="margin-top: 20px"></div>

                        <div class="layui-hide" id="pickResult">

                            <fieldset class="layui-elem-field layui-field-title">
                                <legend>本轮推荐</legend>
                            </fieldset>

                            <div style="margin-top: 20px"></div>

                            <table class="layui-table" id="pickTable" lay-filter="pickTable"></table>

                        </div>

                    </div>

                    <div class="layui-tab-item">
                        <div style="margin-top: 20px"></div>
                        <div id="checkGw" style="font-size: 20px"></div>
                        <table class="layui-table" id="scoutTable" lay-filter="scoutTable"></table>
                    </div>

                </div>

            </div>

        </div>
    </div>
</div>

<div th:replace="layout::footer"></div>

</body>

<script th:replace="layout::baseScript"></script>

<script th:replace="layout::entryInputLayer"></script>

<script th:replace="layout::playerDetail"></script>

<script th:inline="javascript">
    layui.use(['layer'], function () {
        let $ = layui.jquery,
            deadline = moment([[${deadline}]]).utcOffset(new Date().getTimezoneOffset() + 480).format('YYYY/MM/DD HH:mm:ss'),
            fund = numAdd(numAdd([[${scoutEntryEventData.gkpPrice}]], [[${scoutEntryEventData.defPrice}]]), numAdd([[${scoutEntryEventData.midPrice}]], [[${scoutEntryEventData.fwdPrice}]])),
            leftFund = numSub([[${fund}]], fund);
        $("#deadline").text(deadline);
        $("#deadLineTime").text("死线: " + deadline);
        $("#leftFund").text("剩余资金：" + leftFund + "m");
    });
</script>

<script id="toolbar" type="text/html">
    <div class="layui-btn-container">
        <button class="layui-btn layui-btn-sm" lay-event="gkp">GKP</button>
        <button class="layui-btn layui-btn-sm" lay-event="def">DEF</button>
        <button class="layui-btn layui-btn-sm" lay-event="mid">MID</button>
        <button class="layui-btn layui-btn-sm" lay-event="fwd">FWD</button>
        <button class="layui-btn layui-btn-sm" lay-event="clear">清除筛选条件</button>
    </div>
</script>

<script id="checkToolbar" type="text/html">
    <button class="layui-btn layui-btn-sm" lay-filter="checkEvent" id="checkEvent"><span>查看时间</span><i
            class="layui-icon layui-icon-triangle-d"></i></button>
</script>

<script th:inline="none">
    layui.use(['element', 'table', 'layer', 'soulTable', 'dropdown'], function () {

        let $ = layui.jquery, element = layui.element, table = layui.table, soulTable = layui.soulTable,
            dropdown = layui.dropdown, loadIndex, nextGw = $("#nextGw").text(), deadline = $("#deadline").text(),
            gkpCol = gkpCols(), defCol = defCols(), midCol = midCols(), fwdCol = fwdCols();

        soulTable.config({
            drag: false,
            overflow: {
                type: 'tips',
                header: true,
                total: true
            }
        });

        <!-- pick -->
        table.render({
            elem: '#playerTable',
            toolbar: '#toolbar',
            defaultToolbar: ['filter'],
            size: 'sm',
            even: true,
            data: [],
            page: true,
            limit: 15,
            limits: [15, 30, 50, 100],
            contextmenu: {
                body: [
                    {
                        name: '选为队长',
                        icon: 'layui-icon layui-icon-template',
                        click: function (obj) {
                            $("input[name=cap]").val(obj.row.webName);
                            $("#capElement").text(obj.row.element);
                        }
                    }
                ]
            },
            cols: [
                [
                    {
                        fixed: 'left',
                        field: 'webName',
                        title: '球员',
                        align: 'center',
                        filter: true,
                        rowspan: 2,
                        templet: function (d) {
                            if (d.chancePlayingNextRound < 100 && d.chancePlayingNextRound >= 50) {
                                return '<span style="color: orange">' + d.webName + '</span>';
                            } else if (d.chancePlayingNextRound < 50 && d.news !== '') {
                                return '<span style="color: red">' + d.webName + '</span>';
                            }
                            return d.webName;
                        },
                        icon: ['layui-icon layui-icon-triangle-r', 'layui-icon layui-icon-triangle-d'],
                        children: function (d) {
                            let col;
                            switch (d.elementType) {
                                case 1: {
                                    col = gkpCol;
                                    break;
                                }
                                case 2: {
                                    col = defCol;
                                    break;
                                }
                                case 3: {
                                    col = midCol;
                                    break;
                                }
                                case 4: {
                                    col = fwdCol;
                                    break;
                                }
                            }
                            return [
                                {
                                    title: '赛季',
                                    url: '/group/qryPlayerDetailData',
                                    where: {element: d.element},
                                    cols: col,
                                    autoColumnWidth: {
                                        init: true
                                    },
                                    done: function () {
                                        soulTable.render(this);
                                    }
                                }
                            ];
                        }
                    },
                    {field: 'teamShortName', title: '球队', align: 'center', filter: true, rowspan: 2},
                    {
                        field: 'price',
                        title: '身价',
                        align: 'center',
                        sort: true,
                        filter: true,
                        rowspan: 2,
                        templet: function (d) {
                            return d.price + 'm';
                        }
                    },
                    {
                        field: 'totalPoints',
                        title: '总分',
                        align: 'center',
                        sort: true,
                        filter: true,
                        rowspan: 2
                    },
                    {
                        field: 'selectedByPercent',
                        title: '持有率',
                        align: 'center',
                        sort: true,
                        filter: true,
                        rowspan: 2,
                        templet: function (d) {
                            return d.selectedByPercent + '%';
                        }
                    },
                    {
                        field: 'pointsPerGame',
                        title: '场均得分',
                        align: 'center',
                        sort: true,
                        rowspan: 2
                    },
                    {
                        field: 'form',
                        title: '状态',
                        align: 'center',
                        sort: true,
                        rowspan: 2
                    },
                    {
                        field: 'inDreamteam',
                        title: '梦之队',
                        align: 'center',
                        filter: true,
                        rowspan: 2,
                        templet: function (d) {
                            if (d.inDreamteam) {
                                return '是';
                            } else {
                                return '否';
                            }
                        }
                    },
                    {field: '', title: '赛程', align: 'center', colspan: 5}
                ],
                [
                    {
                        field: '',
                        title: '',
                        align: 'center',
                        templet: function (d) {
                            return showDifficulty(d.againstTeamShortName1, d.difficulty1, d.event1, d.wasHome1);
                        }
                    },
                    {
                        field: '',
                        title: '',
                        align: 'center',
                        templet: function (d) {
                            return showDifficulty(d.againstTeamShortName2, d.difficulty2, d.event2, d.wasHome2);
                        }
                    },
                    {
                        field: '',
                        title: '',
                        align: 'center',
                        templet: function (d) {
                            return showDifficulty(d.againstTeamShortName3, d.difficulty3, d.event3, d.wasHome3);
                        }
                    },
                    {
                        field: '',
                        title: '',
                        align: 'center',
                        templet: function (d) {
                            return showDifficulty(d.againstTeamShortName4, d.difficulty4, d.event4, d.wasHome4);
                        }
                    },
                    {
                        field: '',
                        title: '',
                        align: 'center',
                        templet: function (d) {
                            return showDifficulty(d.againstTeamShortName5, d.difficulty5, d.event5, d.wasHome5);
                        }
                    }
                ]
            ],
            autoColumnWidth: {
                init: true
            },
            filter: {
                items: ['data', 'condition'],
                bottom: false
            },
            id: 'playerTable',
            done: function () {
                soulTable.render(this);
            }
        });

        table.on('toolbar(playerTable)', function (obj) {
            soulTable.clearFilter('playerTable');
            switch (obj.event) {
                case 'gkp': {
                    loadIndex = layer.msg("加载中，请稍等", {time: false, scrollbar: false});
                    axios.get('/group/qryScoutPlayerList?elementType=1')
                        .then(function (response) {
                            layer.close(loadIndex);
                            table.reload('playerTable', {data: parsePlayerTableData(response.data)});
                        })
                        .catch(function (error) {
                            layer.close(loadIndex);
                            console.info(error);
                        });
                    break;
                }
                case 'def': {
                    loadIndex = layer.msg("加载中，请稍等", {time: false, scrollbar: false});
                    axios.get('/group/qryScoutPlayerList?elementType=2')
                        .then(function (response) {
                            layer.close(loadIndex);
                            table.reload('playerTable', {data: parsePlayerTableData(response.data)});
                        })
                        .catch(function (error) {
                            layer.close(loadIndex);
                            console.info(error);
                        });
                    break;
                }
                case 'mid': {
                    loadIndex = layer.msg("加载中，请稍等", {time: false, scrollbar: false});
                    axios.get('/group/qryScoutPlayerList?elementType=3')
                        .then(function (response) {
                            layer.close(loadIndex);
                            table.reload('playerTable', {data: parsePlayerTableData(response.data)});
                        })
                        .catch(function (error) {
                            layer.close(loadIndex);
                            console.info(error);
                        });
                    break;
                }
                case 'fwd': {
                    loadIndex = layer.msg("加载中，请稍等", {time: false, scrollbar: false});
                    axios.get('/group/qryScoutPlayerList?elementType=4')
                        .then(function (response) {
                            layer.close(loadIndex);
                            table.reload('playerTable', {data: parsePlayerTableData(response.data)});
                        })
                        .catch(function (error) {
                            layer.close(loadIndex);
                            console.info(error);
                        });
                    break;
                }
                case 'clear': {
                    break;
                }
            }
        });

        table.on('row(playerTable)', function (obj) {
            let fundDom = $("#fund"), gkpPrice = $("#gkpPrice"), defPrice = $("#defPrice"), midPrice = $("#midPrice"),
                fwdPrice = $("#fwdPrice");
            let elementType = obj.data.elementType, element = obj.data.element, webName = obj.data.webName,
                value = parseFloat(obj.data.price), price = value + 'm';
            let fund = 0, leftFund = 0, gkpFund = 0, defFund = 0, midFund = 0, fwdFund = 0;
            if (fundDom.text() !== '') {
                fund = parseFloat(fundDom.text());
            }
            if (gkpPrice.text() !== '') {
                gkpFund = parseFloat(gkpPrice.text().slice(0, gkpPrice.text().indexOf('m')));
            }
            if (defPrice.text() !== '') {
                defFund = parseFloat(defPrice.text().slice(0, defPrice.text().indexOf('m')));
            }
            if (midPrice.text() !== '') {
                midFund = parseFloat(midPrice.text().slice(0, midPrice.text().indexOf('m')));
            }
            if (fwdPrice.text() !== '') {
                fwdFund = parseFloat(fwdPrice.text().slice(0, fwdPrice.text().indexOf('m')));
            }
            // 填位置
            switch (elementType) {
                case 1: {
                    leftFund = numSub(fund, numAdd(numAdd(value, defFund), numAdd(midFund, fwdFund)));
                    if (leftFund < 0) {
                        layer.msg("钱不够啦！", {time: 1500});
                        return false;
                    }
                    $("input[name=gkp]").val(webName);
                    gkpPrice.text(price);
                    $("#gkpElement").text(element);
                    break;
                }
                case 2: {
                    leftFund = numSub(fund, numAdd(numAdd(gkpFund, value), numAdd(midFund, fwdFund)));
                    if (leftFund < 0) {
                        layer.msg("钱不够啦！", {time: 1500});
                        return false;
                    }
                    $("input[name=def]").val(webName);
                    defPrice.text(price);
                    $("#defElement").text(element);
                    break;
                }
                case 3: {
                    leftFund = numSub(fund, numAdd(numAdd(gkpFund, defFund), numAdd(value, fwdFund)));
                    if (leftFund < 0) {
                        layer.msg("钱不够啦！", {time: 1500});
                        return false;
                    }
                    $("input[name=mid]").val(webName);
                    midPrice.text(price);
                    $("#midElement").text(element);
                    break;
                }
                case 4: {
                    leftFund = numSub(fund, numAdd(numAdd(gkpFund, defFund), numAdd(midFund, value)));
                    if (leftFund < 0) {
                        layer.msg("钱不够啦！", {time: 1500});
                        return false;
                    }
                    $("input[name=fwd]").val(webName);
                    fwdPrice.text(price);
                    $("#fwdElement").text(element);
                    break;
                }
                default:
                    return false;
            }
            // 计算剩余资金
            fund = fundDom.text();
            gkpFund = gkpPrice.text().slice(0, gkpPrice.text().indexOf('m'));
            defFund = defPrice.text().slice(0, defPrice.text().indexOf('m'));
            midFund = midPrice.text().slice(0, midPrice.text().indexOf('m'));
            fwdFund = fwdPrice.text().slice(0, fwdPrice.text().indexOf('m'));
            leftFund = numSub(fund, numAdd(numAdd(gkpFund, defFund), numAdd(midFund, fwdFund)));
            $("#leftFund").text('剩余资金:' + leftFund + 'm');
        });

        $("#confirmButton").on('click', function () {
            let data = {};
            data.gkp = $("#gkpElement").text();
            data.def = $("#defElement").text();
            data.mid = $("#midElement").text();
            data.fwd = $("#fwdElement").text();
            data.captain = $("#capElement").text();
            data.reason = $("textarea[name=reason]").val();
            // 禁用提交按钮
            $(this).attr("disabled", "");
            // 提交
            axios.post('/group/upsertEventScout', data)
                .then(function (response) {
                    layer.msg(response, {time: 1500});
                    window.location.replace("/group/scout");
                })
                .catch(function (error) {
                    console.info(error);
                    $(this).removeAttr("disabled");
                });
        });

        $("#resetButton").on('click', function () {
            let fund = $("#fund").text();
            $("#leftFund").text('剩余资金:' + fund + 'm');
            // gkp
            $("input[name=gkp]").val('');
            $("#gkpPrice").text('');
            $("#gkpElement").text('');
            // def
            $("input[name=def]").val('');
            $("#defPrice").text('');
            $("#defElement").text('');
            // mid
            $("input[name=mid]").val('');
            $("#midPrice").text('');
            $("#midElement").text('');
            // fwd
            $("input[name=fwd]").val('');
            $("#fwdPrice").text('');
            $("#fwdElement").text('');
            // captain
            $("input[name=cap]").val('');
            $("#capElement").text('');
        });

        if (moment() > moment(deadline.split('/').join('-'))) {
            $("#pickResult").removeClass("layui-hide");
            table.render({
                elem: '#pickTable',
                url: '/group/qryEventScoutPickList',
                where: {event: parseInt(nextGw)},
                cols: [[
                    {
                        field: 'entry',
                        title: 'team_id',
                        even: true,
                        align: 'center',
                        icon: ['layui-icon layui-icon-triangle-r', 'layui-icon layui-icon-triangle-d'],
                        childTitle: false,
                        isChild: function (d) {
                            return d.reason !== '';
                        },
                        children: [
                            {
                                data: function (d) {
                                    return [d];
                                },
                                cols: [[
                                    {
                                        field: 'reason',
                                        title: '',
                                        align: 'center',
                                        style: 'word-break: break-all; white-space: normal;',
                                    }
                                ]],
                                done: function () {
                                    soulTable.render(this);
                                }
                            }
                        ]
                    },
                    {field: 'scoutName', title: '球探', align: 'center'},
                    {field: 'gkpName', title: '门将', align: 'center', sort: true},
                    {field: 'gkpTeamShortName', title: '球队', align: 'center', sort: true},
                    {field: 'defName', title: '后卫', align: 'center', sort: true},
                    {field: 'defTeamShortName', title: '球队', align: 'center', sort: true},
                    {field: 'midName', title: '中场', align: 'center', sort: true},
                    {field: 'midTeamShortName', title: '球队', align: 'center', sort: true},
                    {field: 'fwdName', title: '前锋', align: 'center', sort: true},
                    {field: 'fwdTeamShortName', title: '球队', align: 'center', sort: true},
                    {field: 'captainName', title: '队长', align: 'center', sort: true},
                    {field: 'captainTeamShortName', title: '球队', align: 'center', sort: true}
                ]],
                autoColumnWidth: {
                    init: true
                },
                id: 'pickTable',
                done: function () {
                    soulTable.render(this);
                }
            });
        }

        <!-- result -->
        element.on('tab(checkTab)', function (data) {
            if (data.index === 1) {
                // 当前周
                $("#checkGw").text('GW' + (parseInt(nextGw) - 1) + '统计');
                table.render({
                    elem: '#scoutTable',
                    size: 'sm',
                    even: true,
                    toolbar: '#checkToolbar',
                    defaultToolbar: false,
                    url: '/group/qryEventScoutList',
                    where: {event: parseInt(nextGw) - 1},
                    cols: [[
                        {title: '', type: 'numbers'},
                        {field: 'scoutName', title: '球探', align: 'center'},
                        {
                            field: 'eventPoints',
                            title: '周得分',
                            align: 'center',
                            style: 'background-color: #5FB878; color: #fff;',
                            sort: true
                        },
                        {
                            field: 'gkpName',
                            title: '门将',
                            align: 'center',
                            templet: function (d) {
                                return d.gkpName + "(" + d.gkpTeamShortName + ")";
                            }
                        },
                        {field: 'gkpPoints', title: '得分', align: 'center', sort: true},
                        {
                            field: 'defName',
                            title: '后卫',
                            align: 'center',
                            templet: function (d) {
                                return d.defName + "(" + d.defTeamShortName + ")";
                            }
                        },
                        {field: 'defPoints', title: '得分', align: 'center', sort: true},
                        {
                            field: 'midName',
                            title: '中场',
                            align: 'center',
                            templet: function (d) {
                                return d.midName + "(" + d.midTeamShortName + ")";
                            }
                        },
                        {field: 'midPoints', title: '得分', align: 'center', sort: true},
                        {
                            field: 'fwdName',
                            title: '前锋',
                            align: 'center',
                            templet: function (d) {
                                return d.fwdName + "(" + d.fwdTeamShortName + ")";
                            }
                        },
                        {field: 'fwdPoints', title: '得分', align: 'center', sort: true},
                        {
                            field: 'captainName',
                            title: '队长',
                            align: 'center',
                            templet: function (d) {
                                return d.captainName + "(" + d.captainTeamShortName + ")";
                            }
                        },
                        {field: 'captainPoints', title: '得分', align: 'center', sort: true}
                    ]],
                    autoColumnWidth: {
                        init: true
                    },
                    id: 'scoutTable',
                    done: function () {
                        soulTable.render(this);
                        // 下拉选项
                        axios.get('/group/getScoutEventList')
                            .then(function (response) {
                                dropdown.suite("#checkEvent", {
                                    menus: response
                                });
                            })
                    }
                });
            }
        });

        table.on('toolbar(scoutTable)', function () {
            dropdown.onFilter("checkEvent", function (event) {
                if (event === "0") {
                    $("#checkGw").text('赛季统计');
                    table.render({
                        elem: '#scoutTable',
                        size: 'sm',
                        even: true,
                        url: '/group/qryEventScoutList',
                        where: {event: 0},
                        toolbar: '#checkToolbar',
                        defaultToolbar: false,
                        cols: [[
                            {title: '', type: 'numbers'},
                            {field: 'scoutName', title: '球探', align: 'center'},
                            {
                                field: 'totalPoints',
                                title: '总分',
                                align: 'center',
                                style: 'background-color: #5FB878; color: #fff;',
                                sort: true
                            },
                            {field: 'gkpPoints', title: '门将', align: 'center', sort: true},
                            {field: 'defPoints', title: '后卫', align: 'center', sort: true},
                            {field: 'midPoints', title: '中场', align: 'center', sort: true},
                            {field: 'fwdPoints', title: '前锋', align: 'center', sort: true},
                            {field: 'captainPoints', title: '队长', align: 'center', sort: true}
                        ]],
                        autoColumnWidth: {
                            init: true
                        },
                        id: 'scoutTable',
                        done: function () {
                            soulTable.render(this);
                            // 下拉选项
                            axios.get('/group/getScoutEventList')
                                .then(function (response) {
                                    dropdown.suite("#checkEvent", {
                                        menus: response
                                    });
                                })
                        }
                    });
                } else {
                    $("#checkGw").text('GW' + event + '统计');
                    table.render({
                        elem: '#scoutTable',
                        size: 'sm',
                        even: true,
                        url: '/group/qryEventScoutList',
                        where: {event: event},
                        toolbar: '#checkToolbar',
                        defaultToolbar: false,
                        cols: [[
                            {title: '', type: 'numbers'},
                            {field: 'scoutName', title: '球探', align: 'center'},
                            {
                                field: 'eventPoints',
                                title: '周得分',
                                align: 'center',
                                style: 'background-color: #5FB878; color: #fff;',
                            },
                            {
                                field: 'gkpName',
                                title: '门将',
                                align: 'center',
                                templet: function (d) {
                                    return d.gkpName + "(" + d.gkpTeamShortName + ")";
                                }
                            },
                            {field: 'gkpPoints', title: '得分', align: 'center'},
                            {
                                field: 'defName',
                                title: '后卫',
                                align: 'center',
                                templet: function (d) {
                                    return d.defName + "(" + d.defTeamShortName + ")";
                                }
                            },
                            {field: 'defPoints', title: '得分', align: 'center'},
                            {
                                field: 'midName',
                                title: '中场',
                                align: 'center',
                                templet: function (d) {
                                    return d.midName + "(" + d.midTeamShortName + ")";
                                }
                            },
                            {field: 'midPoints', title: '得分', align: 'center'},
                            {
                                field: 'fwdName',
                                title: '前锋',
                                align: 'center',
                                templet: function (d) {
                                    return d.fwdName + "(" + d.fwdTeamShortName + ")";
                                }
                            },
                            {field: 'fwdPoints', title: '得分', align: 'center'},
                            {
                                field: 'captainName',
                                title: '队长',
                                align: 'center',
                                templet: function (d) {
                                    return d.captainName + "(" + d.captainTeamShortName + ")";
                                }
                            },
                            {field: 'captainPoints', title: '得分', align: 'center'}
                        ]],
                        autoColumnWidth: {
                            init: true
                        },
                        id: 'scoutTable',
                        done: function () {
                            soulTable.render(this);
                            // 下拉选项
                            axios.get('/group/getScoutEventList')
                                .then(function (response) {
                                    dropdown.suite("#checkEvent", {
                                        menus: response
                                    });
                                })
                        }
                    });
                }
            });
        });

    });

</script>

</html>
